<!doctype html>
<html>
  <head>
    <title>Julian's Monster Game</title>
    <link rel="stylesheet" type="text/css" href="mystyle.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  </head>
  <body>
    <div><a href="https://github.com/fishjtpcc1/javagae002">source origin</a></div>
    <div id="screen"></div>
    <script>
/** this *is* the console in this javaservlet architecture */
// see console for exceptions eg json parse errors
$(document).ready(function() {
  function handle(input) {
    $.post('/tier2', {input:input}, function(data, status) {
      //alert(data+"\n"+status);
      console.log(data);
      $('#screen').html($('#screen').html()+"<p>"+data.screen+"</p>"); // app sends print or println equivalents
      
      switch (data.method) {
        case "read":
          $(document).keypress(function(event){
              //alert(event.which);
              $(document).off("keypress");
              handle(event.which);
          });
          break;
        case "readln":
          var text = "";
          $(document).keypress(function(event){
              //alert(event.which);
              if (event.which == 13) {
                // end of line
                $(document).off("keypress");
                handle(text);
              } else {
                text += String.fromCharCode(event.which);
              }
          });
          break;
      }
      
    }, "json");
  }
  handle(null); // to init  
});
    </script>
  </body>
</html>
